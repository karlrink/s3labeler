
response = client.detect_labels(Image={'S3Object':{'Bucket':s3bucket,'Name':s3object}})
i
<class 'dict'>
{'Labels': [{'Name': 'Flooring', 'Confidence': 99.99486541748047, 'Instances': [], 'Parents': []}, {'Name': 'Floor', 'Confidence': 99.99276733398438, 'Instances': [], 'Parents': []}, {'Name': 'Door', 'Confidence': 86.09169006347656, 'Instances': [{'BoundingBox': {'Width': 0.23239736258983612, 'Height': 0.6427014470100403, 'Left': 0.748911440372467, 'Top': 0.299064576625824}, 'Confidence': 86.09169006347656}], 'Parents': []}, {'Name': 'Indoors', 'Confidence': 83.34758758544922, 'Instances': [], 'Parents': []}, {'Name': 'Room', 'Confidence': 74.61431884765625, 'Instances': [], 'Parents': [{'Name': 'Indoors'}]}, {'Name': 'Wood', 'Confidence': 57.04332733154297, 'Instances': [], 'Parents': []}], 'LabelModelVersion': '2.0', 'ResponseMetadata': {'RequestId': 'a047b67e-1f57-4fac-b50a-b84539110a5b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'content-type': 'application/x-amz-json-1.1', 'date': 'Mon, 26 Jul 2021 18:11:46 GMT', 'x-amzn-requestid': 'a047b67e-1f57-4fac-b50a-b84539110a5b', 'content-length': '667', 'connection': 'keep-alive'}, 'RetryAttempts': 0}}
Label: Flooring
Label: Floor
Label: Door
Label: Indoors
Label: Room
Label: Wood




#response = client.detect_labels(Image={'S3Object':{'Bucket':s3bucket,'Name':s3object}}, MaxLabels=10)


ðŸ§¨ karl.rink@Karl-MacBook-Pro s3labeler % ./s3labeler.py rekognition ninfo-property-images/00000023a562a2525633af58b9a710063f56a877.jpg detect-labels
detect-labels
ninfo-property-images
00000023a562a2525633af58b9a710063f56a877.jpg
us-west-2
<class 'dict'>
{'Labels': [{'Name': 'Flooring', 'Confidence': 99.99486541748047, 'Instances': [], 'Parents': []}, {'Name': 'Floor', 'Confidence': 99.99276733398438, 'Instances': [], 'Parents': []}, {'Name': 'Door', 'Confidence': 86.09169006347656, 'Instances': [{'BoundingBox': {'Width': 0.23239736258983612, 'Height': 0.6427014470100403, 'Left': 0.748911440372467, 'Top': 0.299064576625824}, 'Confidence': 86.09169006347656}], 'Parents': []}, {'Name': 'Indoors', 'Confidence': 83.34758758544922, 'Instances': [], 'Parents': []}, {'Name': 'Room', 'Confidence': 74.61431884765625, 'Instances': [], 'Parents': [{'Name': 'Indoors'}]}, {'Name': 'Wood', 'Confidence': 57.04332733154297, 'Instances': [], 'Parents': []}], 'LabelModelVersion': '2.0', 'ResponseMetadata': {'RequestId': '735ead0f-23cf-438b-b24c-13c9e6bd9796', 'HTTPStatusCode': 200, 'HTTPHeaders': {'content-type': 'application/x-amz-json-1.1', 'date': 'Mon, 26 Jul 2021 18:02:13 GMT', 'x-amzn-requestid': '735ead0f-23cf-438b-b24c-13c9e6bd9796', 'content-length': '667', 'connection': 'keep-alive'}, 'RetryAttempts': 0}}
Label: Flooring
Label: Floor
Label: Door
Label: Indoors
Label: Room
Label: Wood
ðŸ§¨ karl.rink@Karl-MacBook-Pro s3labeler %



don't forget the  --region us-west-2


aws rekognition detect-labels --image '{"S3Object":{"Bucket":"ninfo-property-images","Name":"00001796475b02a1db8c89106b0ba12d76a6217b.jpg"}}' 


ðŸ§¨ karl.rink@Karl-MacBook-Pro image_classifier % aws rekognition detect-labels --image '{"S3Object":{"Bucket":"ninfo-property-images","Name":"00001796475b02a1db8c89106b0ba12d76a6217b.jpg"}}'

An error occurred (InvalidS3ObjectException) when calling the DetectLabels operation: Unable to get object metadata from S3. Check object key, region and/or access permissions.
ðŸ§¨ karl.rink@Karl-MacBook-Pro image_classifier %




ðŸ§¨ karl.rink@Karl-MacBook-Pro s3labeler % ./s3labeler.py rekognition ninfo-property-images/00001796475b02a1db8c89106b0ba12d76a6217b.jpg detect-labels
detect-labels
ninfo-property-images
00001796475b02a1db8c89106b0ba12d76a6217b.jpg
Traceback (most recent call last):
  File "./s3labeler.py", line 1379, in <module>
    main()
  File "./s3labeler.py", line 1107, in main
    response = client.detect_labels(Image={'S3Object':{'Bucket':s3bucket,'Name':s3object}}, MaxLabels=10)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.errorfactory.InvalidS3ObjectException: An error occurred (InvalidS3ObjectException) when calling the DetectLabels operation: Unable to get object metadata from S3. Check object key, region and/or access permissions.
ðŸ§¨ karl.rink@Karl-MacBook-Pro s3labeler %

---

ðŸ§¨ karl.rink@Karl-MacBook-Pro image_classifier % aws rekognition detect-labels --image '{"S3Object":{"Bucket":"ninfo-property-images","Name":"00001796475b02a1db8c89106b0ba12d76a6217b.jpg"}}' --region us-west-2
{
    "Labels": [
        {
            "Name": "Corner",
            "Confidence": 98.32282257080078,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Appliance",
            "Confidence": 95.76081848144531,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Ceiling Fan",
            "Confidence": 92.94519805908203,
            "Instances": [
                {
                    "BoundingBox": {
                        "Width": 0.30115851759910583,
                        "Height": 0.22155123949050903,
                        "Left": 0.39029446244239807,
                        "Top": 0.002962381113320589
                    },
                    "Confidence": 92.94519805908203
                }
            ],
            "Parents": [
                {
                    "Name": "Appliance"
                }
            ]
        },
        {
            "Name": "Furniture",
            "Confidence": 81.3620376586914,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Indoors",
            "Confidence": 78.88905334472656,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Housing",
            "Confidence": 73.43911743164062,
            "Instances": [],
            "Parents": [
                {
                    "Name": "Building"
                }
            ]
        },
        {
            "Name": "Building",
            "Confidence": 73.43911743164062,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Flooring",
            "Confidence": 72.95887756347656,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Floor",
            "Confidence": 70.50959777832031,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Table",
            "Confidence": 66.49359130859375,
            "Instances": [],
            "Parents": [
                {
                    "Name": "Furniture"
                }
            ]
        },
        {
            "Name": "Electronics",
            "Confidence": 58.811153411865234,
            "Instances": [],
            "Parents": []
        },
        {
            "Name": "Cabinet",
            "Confidence": 58.374168395996094,
            "Instances": [],
            "Parents": [
                {
                    "Name": "Furniture"
                }
            ]
        }
    ],
    "LabelModelVersion": "2.0"
}
ðŸ§¨ karl.rink@Karl-MacBook-Pro image_classifier % 



